@{
    ViewData["Title"] = "Compose";
}



<div class="container mt-5">
    
    <div class="row justify-content-center">
         <div class="col-md-8">
            <a href="@Url.Action("AddMailAccount", "Email")" class="btn btn-success">Add Mail Account</a>
            <a href="@Url.Action("AddEmailTemplate", "Email")" class="btn btn-success">Add Email Template</a>

         
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h2 class="mb-0">@ViewData["Title"]</h2>
                </div>
                <div class="card-body">
                    <form asp-action="SendEmail" method="post" enctype="multipart/form-data">
                        <div class="form-group">
                            <label for="accountId">Select Mail Account:</label>
                            <select class="form-control" id="accountId" name="accountId">
                                @foreach (var account in ViewBag.MailAccounts)
                                {
                                    <option value="@account.Id">@account.Email</option>
                                }
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="subject">Subject:</label>
                            <input type="text" class="form-control" id="subject" name="subject" required>
                        </div>
                        <div class="form-group">
                            <label for="templateName">Select Email Template:</label>
                            <select class="form-control" id="templateName" name="templateName" onchange="updateMessage()">
                                <option value="">Select a template</option>
                                @foreach (var template in ViewBag.EmailTemplates)
                                {
                                    <option value="@template.Content">@template.TemplateName</option>
                                }
                            </select>
                        </div>



                        <div class="form-group">
                            <label for="message">Message:</label>
                            <textarea class="form-control" id="message" name="message" required rows="8"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="recipients">Recipients:</label>
                            <input type="text" class="form-control" id="recipients" name="recipients" required>
                            <small class="form-text text-muted">Separate multiple email addresses with commas</small>
                        </div>
                        <div class="form-group">
                            <label for="contactFile">Import Contacts (CSV):</label>
                            <input type="file" id="contactFile" name="contactFile" accept=".csv" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Send</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function updateMessage() {
        var templateSelect = document.getElementById('templateName');
        var messageTextarea = document.getElementById('message');
        var selectedTemplateContent = templateSelect.value;
        messageTextarea.value = selectedTemplateContent;
    }
</script>






@* @{
    ViewData["Title"] = "Compose";
}

<a href="@Url.Action("AddMailAccount", "Home")" class="btn btn-primary">Add Mail Account</a>
<a href="@Url.Action("AddEmailTemplate", "Home")" class="btn btn-primary">Add Email Template</a>

<h2>Compose Email</h2>

<form asp-action="SendEmail" method="post" enctype="multipart/form-data">
    <!-- Select Mail Account Dropdown -->
    <div class="form-group">
        <label for="accountId">Select Mail Account:</label>
        <select class="form-control" id="accountId" name="accountId">
            @foreach (var account in ViewBag.MailAccounts)
            {
                <option value="@account.Id">@account.Email</option>
            }
        </select>
    </div>

    <!-- Subject -->
    <div class="form-group">
        <label for="subject">Subject:</label>
        <input type="text" class="form-control" id="subject" name="subject" required>
    </div>

    <div class="form-group">
        <label for="templateName">Select Email Template:</label>
        <select class="form-control" id="templateName" name="templateName" onchange="updateMessage()">
            <option value="">Select a template</option>
            @foreach (var template in ViewBag.EmailTemplates)
            {
                <option value="@template.Content" id="templateData">@template.TemplateName</option>
            }
        </select>
    </div>

    <div class="form-group">
        <label for="message">Message:</label>
        <textarea class="form-control" id="message" name="message" required>hi</textarea>
    </div>


    <!-- Recipients -->
    <div class="form-group">
        <label for="recipients">Recipients:</label>
        <input type="text" class="form-control" id="recipients" name="recipients" required>
        <small>Separate multiple email addresses with commas</small>
    </div>

    <div class="form-group">
        <label for="contactFile">Import Contacts (CSV):</label>
        <input type="file" id="contactFile" name="contactFile" accept=".csv" required>
    </div>
   


    <button type="submit" class="btn btn-primary">Send</button>
</form>

<script>
    function updateMessage() {
        var templateSelect = document.getElementById('templateName');
        var messageTextarea = document.getElementById('message');

        // Get the selected template content
        var selectedTemplateContent = templateSelect.value;

        // Update the message textarea with the selected template content
        messageTextarea.value = selectedTemplateContent;
    }
</script>




  *@

